"use strict";if(navigator.serviceWorker){var fetchRestaurantsAll=function(e){return e},storeData=function(r){dbPromise.then(function(e){var t=r,n=e.transaction("mwsData","readwrite").objectStore("mwsData");t.forEach(function(e){n.put(e)})})},fetchReviewsAll=function(e){return console.log(e),e},storeReviewData=function(r){dbPromise.then(function(e){var t=r,n=e.transaction("mwsReviewData","readwrite").objectStore("mwsReviewData");t.forEach(function(e){n.put(e)})})},dbPromise=idb.open("mwsStage2",1,function(e){switch(e.oldVersion){case 0:e.createObjectStore("mwsData",{keyPath:"id"});e.createObjectStore("mwsReviewData",{keyPath:"id"}).createIndex("restaurant","restaurant_id")}});fetch(DBHelper.DATABASE_URL,{}).then(function(e){return e.json()}).then(fetchRestaurantsAll).then(storeData).catch(function(e){return console.error(e)}),fetch(DBHelper.REVIEW_URL,{}).then(function(e){return e.json()}).then(fetchReviewsAll).then(storeReviewData).catch(function(e){return console.error(e)})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlkYi10ZXN0X2luZGV4LmpzIl0sIm5hbWVzIjpbIm5hdmlnYXRvciIsInNlcnZpY2VXb3JrZXIiLCJmZXRjaFJlc3RhdXJhbnRzQWxsIiwiZGF0YSIsImRiUHJvbWlzZSIsInRoZW4iLCJyZXZpZXdzIiwicmVzdGF1cmFudHMiLCJ0cmFuc2FjdGlvbiIsInN0b3JlIiwib2JqZWN0U3RvcmUiLCJmb3JFYWNoIiwicmV2aWV3IiwicmVzdGF1cmFudCIsInB1dCIsImZldGNoUmV2aWV3c0FsbCIsImNvbnNvbGUiLCJsb2ciLCJzdG9yZVJldmlld0RhdGEiLCJkYiIsImZldGNoIiwiREJIZWxwZXIiLCJSRVZJRVdfVVJMIiwicmVzcG9uc2UiLCJpZGIiLCJvcGVuIiwidXBncmFkZURiIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJrZXlQYXRoIiwiREFUQUJBU0VfVVJMIiwianNvbiIsInN0b3JlRGF0YSIsImNhdGNoIiwiZXJyb3IiLCJtd3NEYXRhU3RvcmUiLCJtd3NSZXZpZXdTdG9yZSIsImNyZWF0ZUluZGV4Il0sIm1hcHBpbmdzIjoiYUFBQSxHQUFJQSxVQUFVQyxjQUFlLENBQUEsSUFrRHpCQyxvQkFBQSxTQUFBQyxHQUNELE9BbkQwQkEsR0FzRHpCQyxVQUFBQSxTQUFBRCxHQUNJQyxVQUFBQyxLQUFJQyxTQUFVSCxHQUNkLElBQUFJLEVBQVlDLEVBRVpGLEVBRElHLEVBQUFBLFlBQVdDLFVBQVksYUFDbkJDLFlBQVEsV0FDWkYsRUFBQUEsUUFBVUcsU0FBVkMsR0FDSEosRUFGREssSUFBQUQsUUFWR0UsZ0JBQVQsU0FBMEJaLEdBbEMxQixPQURBYSxRQUFBQyxJQUFBZCxHQUNBQSxHQUdJZSxnQkFBQSxTQUFPZixHQUNSQyxVQUFPRixLQUFBQSxTQUFBQSxHQUVELElBQUFJLEVBQVNVLEVBcUNSUCxFQXpDVlUsRUFBQVgsWUFBQSxnQkFBQSxhQXlDcUJFLFlBQVksaUJBaEJqQ1UsRUFBTUMsUUFBU0MsU0FBZlYsR0FDSUgsRUFBT2MsSUFBQUEsUUF6Q1BuQixVQUFZb0IsSUFBSUMsS0FBSyxZQUFhLEVBQUcsU0FBU0MsR0FEdkIsT0F1QmxCeEIsRUFBQUEsWUFDUCxLQUFPQyxFQWxCc0J1QixFQUFVQyxrQkFBa0IsVUFBVyxDQUFDQyxRQUFTLE9Bc0IvREYsRUFBYUMsa0JBQUEsZ0JBQUEsQ0FBQUMsUUFBQSxPQUNwQnJCLFlBQUosYUFBQSxvQkFPTGEsTUFwQzBCQyxTQUFBUSxhQUFBLElBQUF4QixLQUFBLFNBQUFrQixHQWlCdkIsT0FBT0EsRUFBU08sU0FxQnBCekIsS0FBQUgscUJBQ0FHLEtBQUEwQixXQW5CR0MsTUFBTSxTQUFBQyxHQUFBLE9BQVNqQixRQUFRaUIsTUFBTUEsS0FmcEJiLE1BQUFDLFNBQUFDLFdBQUEsSUFBQWpCLEtBQUEsU0FBQWtCLEdBQ0EsT0FBQUEsRUFBSVcsU0FDSjdCLEtBQUFVLGlCQUNBVixLQUFBYSxpQkFDQWlCLE1BQUFBLFNBQUFBLEdBQUFBLE9BQUFBLFFBQUFBLE1BQWVDIiwiZmlsZSI6ImlkYi10ZXN0X2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaWYgKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSB7XG4gIHZhciBkYlByb21pc2UgPSBpZGIub3BlbignbXdzU3RhZ2UyJywgMSwgZnVuY3Rpb24odXBncmFkZURiKSB7XG4gICAgICAvLyBzZXQgdXAgc3dpdGNoIHRvIG1hbmFnZSB2ZXJzaW9uIGNvbnRyb2xcbiAgICAgIHN3aXRjaCh1cGdyYWRlRGIub2xkVmVyc2lvbikge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgLy8gc2V0IHVwIGEga2V5IHRoYXQncyBzZXBhcmF0ZSB0byB0aGUgZGF0YVxuICAgICAgICAgICAgICB2YXIgbXdzRGF0YVN0b3JlID0gdXBncmFkZURiLmNyZWF0ZU9iamVjdFN0b3JlKCdtd3NEYXRhJywge2tleVBhdGg6ICdpZCd9KTtcbiAgICAgICAgICAgICAgLy8gc2V0IHVwIGEgc2VwYXJhdGUgb2JqZWN0IHN0b3JlIGZvciB0aGUgcmVzdGF1cmFudCByZXZpZXdzXG4gICAgICAgICAgICAgIHZhciBtd3NSZXZpZXdTdG9yZSA9IHVwZ3JhZGVEYi5jcmVhdGVPYmplY3RTdG9yZSgnbXdzUmV2aWV3RGF0YScsIHtrZXlQYXRoOiAnaWQnfSk7XG4gICAgICAgICAgICAgIG13c1Jldmlld1N0b3JlLmNyZWF0ZUluZGV4KCdyZXN0YXVyYW50JywgJ3Jlc3RhdXJhbnRfaWQnKTtcbiAgICAgIH1cbiAgfSk7ICBcblxuICAvLyBQVVQgREFUQSBJTlRPIERBVEFCQVNFOiBjcmVhdGUgYSBmZXRjaCBldmVudCB0byBwdWxsIHRoZSBkYXRhIGZyb20gdGhlIHNlcnZlclxuICAvLyBjb2RlIGZhaWxzIGlmIG5vdCBjb25uZWN0ZWQgdG8gaW50ZXJuZXQsIGJ1dCBpZiBjb2RlIGlzIGluIHNlcGFyYXRlIGpzIGZpbGUgdGhlbiBpdCBkb2Vzbid0IGhpbmRlciBtYWluLmpzIG9yIHJlc3RhdXJhbnRfaW5mby5qcyBmcm9tIGZ1bmN0aW9uaW5nIG9mZmxpbmUuXG5cbiAgZmV0Y2goREJIZWxwZXIuREFUQUJBU0VfVVJMLCB7fSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgICB9KS50aGVuKGZldGNoUmVzdGF1cmFudHNBbGwpXG4gICAgLnRoZW4oc3RvcmVEYXRhKVxuICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmVycm9yKGVycm9yKSk7ICAgIFxuXG4gICAgXG4gIGZ1bmN0aW9uIGZldGNoUmVzdGF1cmFudHNBbGwgKGRhdGEpIHtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3JlRGF0YSAoZGF0YSkge1xuICAgIGRiUHJvbWlzZS50aGVuKGZ1bmN0aW9uKGRiKSB7XG4gICAgICAgIHZhciByZXN0YXVyYW50cyA9IGRhdGE7XG4gICAgICAgIHZhciB0eCA9IGRiLnRyYW5zYWN0aW9uKCdtd3NEYXRhJywgJ3JlYWR3cml0ZScpO1xuICAgICAgICB2YXIgc3RvcmUgPSB0eC5vYmplY3RTdG9yZSgnbXdzRGF0YScpO1xuICAgICAgICByZXN0YXVyYW50cy5mb3JFYWNoKGZ1bmN0aW9uKHJlc3RhdXJhbnQpIHtcbiAgICAgICAgICAgIHN0b3JlLnB1dChyZXN0YXVyYW50KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBQVVQgREFUQSBJTlRPIERBVEFCQVNFOiBjcmVhdGUgYSBmZXRjaCBldmVudCB0byBwdWxsIHRoZSByZXN0YXVyYW50IHJldmlldyBkYXRhIGZyb20gdGhlIHNlcnZlclxuICAvLyBjb2RlIGZhaWxzIGlmIG5vdCBjb25uZWN0ZWQgdG8gaW50ZXJuZXQsIGJ1dCBpZiBjb2RlIGlzIGluIHNlcGFyYXRlIGpzIGZpbGUgdGhlbiBpdCBkb2Vzbid0IGhpbmRlciBtYWluLmpzIG9yIHJlc3RhdXJhbnRfaW5mby5qcyBmcm9tIGZ1bmN0aW9uaW5nIG9mZmxpbmUuXG5cbiAgZmV0Y2goREJIZWxwZXIuUkVWSUVXX1VSTCwge30pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSkudGhlbihmZXRjaFJldmlld3NBbGwpXG4gICAgLnRoZW4oc3RvcmVSZXZpZXdEYXRhKVxuICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmVycm9yKGVycm9yKSk7ICAgIFxuXG4gICAgXG4gIGZ1bmN0aW9uIGZldGNoUmV2aWV3c0FsbCAoZGF0YSkge1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcmVSZXZpZXdEYXRhIChkYXRhKSB7XG4gICAgZGJQcm9taXNlLnRoZW4oZnVuY3Rpb24oZGIpIHtcbiAgICAgICAgdmFyIHJldmlld3MgPSBkYXRhO1xuICAgICAgICB2YXIgdHggPSBkYi50cmFuc2FjdGlvbignbXdzUmV2aWV3RGF0YScsICdyZWFkd3JpdGUnKTtcbiAgICAgICAgdmFyIHN0b3JlID0gdHgub2JqZWN0U3RvcmUoJ213c1Jldmlld0RhdGEnKTtcbiAgICAgICAgcmV2aWV3cy5mb3JFYWNoKGZ1bmN0aW9uKHJldmlldykge1xuICAgICAgICAgICAgc3RvcmUucHV0KHJldmlldyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cblxufVxuXG4iXX0=
